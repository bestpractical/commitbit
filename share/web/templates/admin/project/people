<&|/_elements/wrapper, title => _('People involved with %1',$project->name)&>

<% Jifty->web->form->start%>
<h2><%_('Add a new committer')%></h2>
<% $new_committer->form_field('person')%>
<% $new_committer->form_field('name')%>
<% $new_committer->form_field('access_level')%>
<% $new_committer->form_field('project', render_as => 'Hidden')%>

<% Jifty->web->form->submit(submit => $new_committer, label => 'Invite em!')%>

<h2><%_('Current committers')%></h2>
% my $committers = $project->people;
<ul>
% while (my $committer = $committers->next) {
% my $member = CommitBit::Model::ProjectMember->new();
% $member->load_by_cols (project => $project, person => $committer);
% my $del = Jifty->web->new_action(class => 'DeleteProjectMember', record => $member, moniker => 'delete-member-'.$member->id);
<li><%$member->name || $committer->email%>:  <%$committer->name_and_email%>
% if ($committer->email_confirmed) {
(<%$member->access_level%>)
% } else {
(<em><%$member->access_level%>, pending</em>)
% }
<%$del->form_field('id')%>
    <% $del->button( label    => 'Delete',
                               class    => 'delete',
                               onclick  => {confirm => q{Really revoke this person's project access?}} ) %>
                               
                               </li>
% }
</ul>
<% Jifty->web->form->end%>
</&>
<%init>
my $new_committer = Jifty->web->new_action(
    class     => 'CreateProjectMember',
    arguments => { project => $project->id }
);
</%init>
<%args>
$project
</%args>
